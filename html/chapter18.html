<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="./">
    <title>第 18 章：练习题与小作业——从“代码逻辑”到“音乐直觉”的综合演练</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>目录</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="搜索..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-item " >
                        <a href="index.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Sonic Pi 作曲与音色设计：古风/戏腔 × 久石让 / Hans Zimmer 式配乐 × 人声处理（中文）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter1.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 1 章：Sonic Pi 快速上手——从 8 小节开始</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter2.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 2 章：从五线谱到代码——音高、时值与读谱映射</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter3.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 3 章：时间、同步与 Live Coding 思维</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter4.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 4 章：和弦进行到可听配器——“会和弦”到“像作品”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter5.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 5 章：旋律写作与动机发展——从“能哼”到“能撑住一段”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter6.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 6 章：节奏织体与打击乐——从板鼓到 Zimmer Drums</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter7.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 7 章：合成器与音色——用频谱直觉在 Sonic Pi 里调音</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter8.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 8 章：采样、切片与粒子化——把“真实”变成“可写作素材”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter9.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 9 章：效果器链与混音入门——让作品“站起来”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter10.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 10 章：电影配乐的配器思路——久石让与 Hans Zimmer 的“可落地抽象”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter11.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 11 章：华语古风与戏腔专题——“腔、韵、留白、材质”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter12.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 12 章：结构与叙事——把段落写成“情绪弧线”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter13.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 13 章：人声录制与处理链——从“录到一条干声”到“能进配乐”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter14.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 14 章：与 DAW / 插件 / 外设联动——把 Sonic Pi 放进你的制作流水线</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter15.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 15 章：实战项目 A——90 秒《古风/戏腔 × 弦乐氛围 × 轻电子》完整制作</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter16.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 16 章：实战项目 B——2 分钟 Hans Zimmer 式“推进与压迫感”配乐</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter17.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 17 章：代码片段速查——可直接复制的“写作积木” (Cheat Sheet)</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" >
                        <a href="chapter18.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 18 章：练习题与小作业——从“代码逻辑”到“音乐直觉”的综合演练</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter19.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 19 章：故障排除与性能优化——当声音不听话时</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="CLAUDE.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="18">第 18 章：练习题与小作业——从“代码逻辑”到“音乐直觉”的综合演练</h1>
<h2 id="181">18.1 开篇段落：作曲家的健身房</h2>
<p>欢迎来到本书的“健身房”。</p>
<p>在前十七章中，我们拆解了 Sonic Pi 的语法，分析了久石让的清澈和声、Hans Zimmer 的音墙轰炸以及华语古风的细腻腔调。但“看懂指南”和“写出作品”之间，隔着巨大的鸿沟。这个鸿沟只能通过<strong>刻意练习（Deliberate Practice）</strong>来填平。</p>
<p>本章不再教授新语法，而是提供 <strong>7 个梯度递增的专项训练</strong>。这些题目设计为“微型项目 Brief（需求书）”，模拟你在为一段游戏场景、一部短片或一首古风歌曲进行配乐。</p>
<p><strong>本章的核心目标</strong>：</p>
<ol>
<li><strong>翻译能力</strong>：训练你听到脑中的旋律后，能迅速将其拆解为 Sonic Pi 的 <code>live_loop</code>、<code>ring</code> 和控制参数。</li>
<li><strong>风格控制</strong>：不仅是写出音符，而是通过包络（ADSR）、滤波器（Cutoff）和混响（Reverb）精确控制“听感温度”。</li>
<li><strong>算法思维</strong>：学会用 <code>tick</code>、<code>look</code> 和随机数来制造“受控的变化”，而不是无序的混乱。</li>
</ol>
<hr />
<h2 id="182">18.2 练习前的准备：思维工具箱</h2>
<p>在动手之前，请复习以下三个“思维模型”，它们是解题的钥匙：</p>
<ol>
<li><strong>减法思维（Subtractive Thinking）</strong>：<ul>
<li>不要一开始就堆满音符。古风需要“留白”，电影配乐需要“频段让位”。</li>
<li><em>Rule of Thumb</em>：如果一段代码听起来很乱，先静音掉 50% 的元素，而不是增加音量。</li>
</ul>
</li>
<li><strong>参数即表情（Parameters as Expression）</strong>：<ul>
<li>代码没有“轻重缓急”的手势，你需要用 <code>amp:</code>（力度）、<code>release:</code>（呼吸长短）、<code>cutoff:</code>（明暗语气）来模拟演奏者的表情。</li>
</ul>
</li>
<li><strong>层级视角（Layered View）</strong>：<ul>
<li>任何复杂的配乐都可以拆解为：<strong>律动层（Rhythm）</strong> + <strong>低音层（Bass）</strong> + <strong>和声层（Pad/Arp）</strong> + <strong>旋律层（Lead）</strong>。解题时，请分层思考。</li>
</ul>
</li>
</ol>
<hr />
<h2 id="183">18.3 专项练习（含提示与参考逻辑）</h2>
<h3 id="1-the-emotional-chameleon">练习 1：情感变色龙 (The Emotional Chameleon)</h3>
<p><strong>场景</strong>：你正在为一部互动电影配乐。同一个场景有三种平行宇宙的走向，导演要求你使用<strong>完全相同的一套和弦进行</strong>（例如 I - V - vi - IV），但通过音色设计表达出截然不同的情绪。</p>
<p><strong>题目</strong>：
使用 <code>[:c, :g, :a, :f]</code> 为根音的基础进行。编写三个版本的 <code>live_loop</code>：</p>
<ol>
<li><strong>版本 A（久石让式）</strong>：“夏日的午后，微风，自行车”。关键词：<strong>清脆、断奏、明亮</strong></li>
<li><strong>版本 B（Hans Zimmer 式）</strong>：“深海潜水艇，压抑，未知”。关键词：<strong>连奏、浑浊、缓慢展开</strong>。</li>
<li><strong>版本 C（赛博/故障风）</strong>：“霓虹灯下的故障机器人”。关键词：<strong>失真、甚至有点走调</strong>。</li>
</ol>
<blockquote>
<p><strong>提示 (Hint)</strong>：</p>
<ul>
<li><strong>A 版</strong>：重点在于短 <code>release</code> 和较高的八度。</li>
<li><strong>B 版</strong>：重点在于长 <code>attack</code>（淡入），低通滤波器（LPF）把高频切掉，以及极低的八度。</li>
<li><strong>C 版</strong>：尝试使用 <code>detune</code>（失谐）参数，或者 <code>bitcrusher</code> 效果器。</li>
</ul>
</blockquote>
<details>
<summary><strong>参考解题逻辑（点击展开）</strong></summary>
<ul>
<li>
<p><strong>版本 A（清新）</strong>：</p>
<ul>
<li><strong>音源</strong>：<code>:piano</code> 或 <code>:pluck</code>。</li>
<li><strong>音符逻辑</strong>：分解和弦（Arpeggio）。使用 <code>tick</code> 快速遍历和弦内音。</li>
<li><strong>关键参数</strong>：<code>release: 0.3</code>（短促），<code>reverb: 0.2</code>（干一点，显近）。</li>
<li><strong>节奏</strong>：8 分音符或 16 分音符的跳跃感。</li>
</ul>
</li>
<li>
<p><strong>版本 B（深海）</strong></p>
<ul>
<li><strong>音源</strong>：<code>:dark_ambience</code> 或 <code>:prophet</code>。</li>
<li><strong>音符逻辑</strong>：柱式和弦（所有音同时响）。</li>
<li><strong>关键参数</strong>：<code>attack: 2.0</code>（像弦乐一样慢进），<code>sustain: 4.0</code>（铺满），<code>cutoff: 70</code>（闷闷的），<code>amp: 0.6</code>（克制）。</li>
<li><strong>音区</strong>：降低 2 个八度（<code>:c2</code> 范围）。</li>
</ul>
</li>
<li>
<p><strong>版本 C（故障）</strong>：</p>
<ul>
<li><strong>音源</strong>：<code>:saw</code> 或 <code>:dsaw</code>。</li>
<li><strong>效果链</strong>：包裹在 <code>with_fx :bitcrusher</code> 中。</li>
<li><strong>关键参数</strong>：<code>detune: 0.2</code>（产生不协和感），<code>release: 0.1</code>（极短的机械感）。</li>
<li><strong>随机性</strong>：偶尔用 <code>one_in(4)</code> 触发一个极高音或休止，模拟电路接触不良。</li>
</ul>
</li>
</ul>
</details>
<hr />
<h3 id="2-gufeng-textures-negative-space">练习 2：古风织体的“留白”构建 (Gufeng Textures &amp; Negative Space)</h3>
<p><strong>场景</strong>：你要写一首古风歌曲的前奏。导演觉得现在的版本“太满、太吵”，没有“意境”。你需要重新编排伴奏，体现中国画的疏密感。</p>
<p><strong>题目</strong>：
主旋律由笛子（<code>:flute</code> 或采样）演奏。你需要编写三个伴奏层，要求：</p>
<ol>
<li><strong>古筝层</strong>：不要一直弹。要求模拟“流水”感——<strong>一串快速音符后，接长时间的留白</strong>。</li>
<li><strong>大鼓层</strong>：建立“板眼”感。不要动次打次，要<strong>“沉、稳、稀”</strong>。</li>
<li><strong>风铃/高频层</strong>：作为点缀，随机出现在立体声场的左右。</li>
</ol>
<p><strong>可视化目标 (ASCII 示意)</strong>：</p>
<div class="codehilite"><pre><span></span><code>笛子 (Melody):  ====== ====== ====== ====== (连贯)
古筝 (Zheng):   ...~~~       ...~~~        (疏密相间)
大鼓 (Drum):    X            X             (极稀疏)
</code></pre></div>

<blockquote>
<p><strong>提示 (Hint)</strong>：</p>
<ul>
<li><strong>五声音阶</strong>：牢记 <code>scale(:c4, :pentatonic_major)</code>。</li>
<li><strong>疏密控制</strong>：使用 <code>if</code> 条件判断（例如 <code>tick % 8 == 0</code>）来控制古筝何时触发“那一串”音符，其余时间 <code>sleep</code>。</li>
</ul>
</blockquote>
<details>
<summary><strong>参考解题逻辑（点击展开）</strong></summary>
<ul>
<li>
<p><strong>古筝层（流水逻辑）</strong>：</p>
<ul>
<li><strong>结构</strong>：一个 <code>live_loop</code>，步长为 0.25。</li>
<li><strong>算法</strong>：设定一个概率开关 <code>dice(6)</code>。如果摇到 6，则触发一个 <code>3.times</code> 的快速循环（模拟轮指），播放三个五声音阶音符。</li>
<li><strong>关键</strong>：如果没摇到 6，只 <code>sleep</code> 不播放。这制造了随机的留白。</li>
<li><strong>音效</strong>：加一点 <code>echo</code>，让那串音符有尾韵。</li>
</ul>
</li>
<li>
<p><strong>大鼓层（板眼逻辑）</strong>：</p>
<ul>
<li><strong>音源</strong>：<code>:taiko</code> 或低通滤波后的 <code>:bd_haus</code>。</li>
<li><strong>节奏</strong>：不要用简单的 <code>sleep 1</code>。尝试 <code>sleep 3</code> 然后 <code>sleep 1</code>，制造“强拍...等待...弱拍”的非对称感。</li>
<li><strong>力度</strong>：<code>amp</code> 应该很大，但 <code>cutoff</code> 很低，以此获得“震动感”而非“打击声”。</li>
</ul>
</li>
<li>
<p><strong>高频层（点缀）</strong>：</p>
<ul>
<li><strong>音源</strong>：<code>:noise</code>（带音调）或高音 <code>:bnoise</code>。</li>
<li><strong>空间</strong>：使用 <code>pan: rrand(-0.8, 0.8)</code> 让声音在左右耳随机出现。</li>
</ul>
</li>
</ul>
</details>
<hr />
<h3 id="3-motif-development">练习 3：旋律发展——从“动机”到“乐句” (Motif Development)</h3>
<p><strong>场景</strong>：你写了一个很好听的 4 个音的动机（Motif），例如 <code>E-G-A-G</code>。现在需要把它发展成一段 8 小节的完整旋律，不能单调重复，要有叙事感。</p>
<p><strong>题目</strong>：
使用 <code>play_pattern_timed</code> 或 <code>ring</code>，基于同一动机完成以下变奏：</p>
<ol>
<li><strong>陈述（A）</strong>：原样播放。</li>
<li><strong>模进（Sequence）</strong>：将整个动机<strong>上移五度</strong>播放（模拟转调带来的情绪提升）。</li>
<li><strong>加密（Rhythmic Diminution）</strong>：保持音高不变，但将<strong>时值减半</strong>（节奏变快一倍），制造紧张感。</li>
<li><strong>逆行（Retrograde）</strong>：挑战题，将这串音符<strong>倒序</strong>播放，听听看是否可用。</li>
</ol>
<blockquote>
<p><strong>提示 (Hint)</strong>：</p>
<ul>
<li>Sonic Pi 的 <code>Ring</code> 链式操作非常适合做这个。</li>
<li><code>.map { |n| n + 7 }</code> 可以实现移调。</li>
<li><code>.reverse</code> 可以实现逆行。</li>
</ul>
</blockquote>
<details>
<summary><strong>参考解题逻辑（点击展开）</strong></summary>
<ul>
<li><strong>数据结构</strong>：定义基础动机 <code>notes = [:e4, :g4, :a4, :g4]</code>，基础时值 <code>times = [1, 0.5, 0.5, 2]</code>。</li>
<li><strong>第 1-2 小节（陈述）</strong>：直接 <code>play_pattern_timed notes, times</code>。</li>
<li><strong>第 3-4 小节（模进）</strong>：<ul>
<li>使用 <code>.map</code> 函数：<code>notes_high = notes.map { |n| n + 5 }</code>（上移四度/五度）。</li>
<li>播放 <code>notes_high</code>。</li>
</ul>
</li>
<li><strong>第 5-6 小节（加密/紧张）</strong>：<ul>
<li>时值缩短：<code>times_fast = times.map { |t| t * 0.5 }</code>。</li>
<li>连播两次，制造急促感。</li>
</ul>
</li>
<li><strong>第 7-8 小节（收尾/逆行）</strong>：<ul>
<li>使用 <code>notes.reverse</code> 得到 G-A-G-E。</li>
<li>最后一个音 <code>E</code> 的时值拉长（<code>sustain: 4</code>），作为乐句的解决（Resolution）。</li>
</ul>
</li>
</ul>
</details>
<hr />
<h3 id="4zimmer-the-wall-of-sound">练习 4：Zimmer 式音墙——自动化与动态 (The Wall of Sound)</h3>
<p><strong>场景</strong>：电影的高潮部分，英雄正在冲向终点。导演要求配乐有“巨大的推背感”，从静谧逐渐推向宏大。</p>
<p><strong>题目</strong>：
编写一段 16 小节的 Loop，不做复杂的旋律，只做动态推进。要求实现 <strong>"The Sunrise Effect"（日出效应）</strong>：</p>
<ol>
<li><strong>低音脉冲</strong>：16 分音符的 Bass，音色从闷（Low Cutoff）逐渐变亮（High Cutoff）。</li>
<li><strong>弦乐长音</strong>：和声层，音量从 0 逐渐淡入到 1。</li>
<li><strong>打击乐</strong>：只在最后 4 小节加入，并且密度越来越大。</li>
</ol>
<blockquote>
<p><strong>提示 (Hint)</strong>：</p>
<ul>
<li><strong>自动化核心</strong>：使用 <code>line(start, finish, steps: n)</code> 函数生成控制曲线。</li>
<li><strong>同步</strong>：确保所有层都 <code>sync</code> 到同一个节拍器，否则推进会乱。</li>
</ul>
</blockquote>
<details>
<summary><strong>参考解题逻辑（点击展开）</strong></summary>
<ul>
<li>
<p><strong>全局控制变量</strong>：</p>
<ul>
<li>创建一个 <code>line</code> 对象：<code>brightness = line(60, 120, steps: 64, inclusive: true)</code>。</li>
<li>这代表在 64 个 16 分音符（即 16 小节）内，Cutoff 值从 60 升到 120。</li>
</ul>
</li>
<li>
<p><strong>Layer 1：低音脉冲</strong>：</p>
<ul>
<li><code>live_loop</code> 每次 tick 读取 <code>brightness</code> 的值。</li>
<li><code>play :saw, cutoff: brightness.look, release: 0.15</code>。</li>
<li>听感：声音会像盖子被慢慢揭开一样变亮。</li>
</ul>
</li>
<li>
<p><strong>Layer 2：打击乐引入</strong>：</p>
<ul>
<li>利用 <code>tick</code> 的计数功能。</li>
<li><code>if tick &gt; 48</code> (即最后 4 小节)：触发高频打击乐（如 Hi-hats 或 Taiko）。</li>
<li><code>if tick &gt; 60</code> (最后 1 小节)：触发滚奏（Snare Roll）。</li>
</ul>
</li>
<li>
<p><strong>重置逻辑</strong>：</p>
<ul>
<li>记得在循环结束后重置 <code>tick</code> 或停止，否则它会一直亮下去。</li>
</ul>
</li>
</ul>
</details>
<hr />
<h3 id="5-vocal-granulation">练习 5：人声切片与粒子化 (Vocal Granulation)</h3>
<p><strong>场景</strong>：你有一段干声（Dry Vocal），是一句优美的戏腔慢唱。现在想把它 remix 成一首电子风格的曲子，需要把人声变成“节奏乐器”。</p>
<p><strong>题目</strong>：
使用 <code>sample</code> 命令，对一段人声素材进行“显微手术”：</p>
<ol>
<li><strong>基础切片</strong>：利用 <code>onset</code> 选项，每次只播放人声的某一个字。</li>
<li><strong>随机重组</strong>：打乱顺序播放这些字，创造“碎片化回忆”的效果。</li>
<li><strong>音高再造</strong>：在播放切片时，强制改变其播放速率（<code>rate</code>），使其符合当前的和弦根音（例如 <code>rate: 1.5</code> 对应五度）。</li>
</ol>
<blockquote>
<p><strong>提示 (Hint)</strong>：</p>
<ul>
<li>Sonic Pi 的 <code>onset:</code> 参数能自动识别音频中的瞬态（Transient，即发声的起点）。</li>
<li><code>rate</code> 与半音的关系公式：<code>rate: 2 ** (n / 12.0)</code>，其中 n 是半音数。</li>
</ul>
</blockquote>
<details>
<summary><strong>参考解题逻辑（点击展开）</strong></summary>
<ul>
<li>
<p><strong>准备工作</strong>：</p>
<ul>
<li>选择一个咬字清晰的采样（<code>:loop_amen</code> 或外部人声 WAV）。</li>
</ul>
</li>
<li>
<p><strong>随机重组算法</strong>：</p>
<ul>
<li><code>live_loop</code> 内，使用 <code>n = rand_i(8)</code> 随机选择第 0 到 第 8 个发音点。</li>
<li><code>sample :my_vocal, onset: n</code>。</li>
<li>这会产生一种“语无伦次但节奏对齐”的电子感。</li>
</ul>
</li>
<li>
<p><strong>和声化（Harmonization）</strong>：</p>
<ul>
<li>定义一个和弦数组 <code>chord_intervals = [0, 4, 7]</code> (大三和弦)。</li>
<li>随机选择一个音程 <code>semi = chord_intervals.choose</code>。</li>
<li>计算速率：<code>r = 2 ** (semi / 12.0)</code>。</li>
<li><code>sample ..., rate: r</code>。</li>
<li>结果：人声切片不仅节奏跳跃，而且会“唱”出大三和弦的旋律。</li>
</ul>
</li>
</ul>
</details>
<hr />
<h3 id="6-crash-the-drop">练习 6：过门与 Crash 的艺术 (The Drop)</h3>
<p><strong>场景</strong>：EDM 或史诗配乐中，从 Build-up（蓄力）到 Drop（爆发）的那一瞬间至关重要。新手最容易犯的错误是“一直吵到底”。</p>
<p><strong>题目</strong>：
编写一个 4 小节的过门段落，包含以下三个阶段：</p>
<ol>
<li><strong>加速（Acceleration）</strong>：军鼓滚奏从 8 分音符变成 32 分音符。</li>
<li><strong>抽空（The Vacuum）</strong>：在第 4 小节的第 4 拍，<strong>强制静音</strong>（Silence），只留一点点残响。</li>
<li><strong>爆发（Impact）</strong>：紧接着触发一个巨大的 Crash 和 Sub Bass。</li>
</ol>
<blockquote>
<p><strong>提示 (Hint)</strong>：</p>
<ul>
<li>利用 <code>control</code> 来改变正在休眠的 <code>sleep</code> 时间是不行的。通常需要根据时间流逝改变 <code>sleep</code> 的变量值。</li>
<li>“抽空”可以通过 <code>stop</code> 一个循环，或者单纯的 <code>sleep</code> 实现。</li>
</ul>
</blockquote>
<details>
<summary><strong>参考解题逻辑（点击展开）</strong></summary>
<ul>
<li>
<p><strong>滚奏算法</strong>：</p>
<ul>
<li>使用 <code>density</code> 函数包裹一段简单的鼓点，并将密度参数绑定到一个 <code>line(1, 4)</code> 甚至 <code>line(1, 8)</code> 上。</li>
<li>或者手动写一个循环，<code>sleep_time</code> 变量从 0.5 递减到 0.0625。</li>
</ul>
</li>
<li>
<p><strong>静音设计（最重要的一步）</strong>：</p>
<ul>
<li>计算时间：在 Loop 运行到 3.75 小节（即第 4 小节第 4 拍）时。</li>
<li>执行逻辑：不触发任何 <code>play</code> 或 <code>sample</code>。</li>
<li>甚至可以加一个 <code>sample :vinyl_rewind</code>（倒带声）作为吸气感。</li>
</ul>
</li>
<li>
<p><strong>爆发</strong>：</p>
<ul>
<li>过门结束后，发送一个 <code>cue :drop</code>。</li>
<li>另一个 <code>live_loop</code> 等待 <code>sync :drop</code>，然后同时播放 <code>:bd_fat</code>（低音）+ <code>:cymbal_crash</code>（镲）+ 巨大的 Reverb。</li>
</ul>
</li>
</ul>
</details>
<hr />
<h3 id="7-stems-delivery">练习 7：交付专项——分轨导出 (Stems Delivery)</h3>
<p><strong>场景</strong>：你的曲子写完了，但混音师要求你提供“分轨（Stems）”。他需要单独的鼓、单独的贝斯、单独的旋律（带混响）和单独的干声。</p>
<p><strong>题目</strong>：
修改你现有的工程代码，建立一个<strong>“总控开关系统”</strong>，让你只需要改一个变量，能分别导出不同轨道。
<strong>要求</strong>：</p>
<ol>
<li>导出旋律轨时，必须包含完整的尾音（Tail），不能戛然而止。</li>
<li>导出鼓轨时，不能有任何旋律的漏音。</li>
</ol>
<details>
<summary><strong>参考解题逻辑（点击展开）</strong></summary>
<ul>
<li><strong>布尔值总控</strong>：<ul>
<li>在代码最顶端定义配置区域：</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1"># 混音师配置面板</span>
<span class="no">MUTE_DRUMS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kp">true</span>
<span class="no">MUTE_MELODY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kp">false</span>
<span class="no">MUTE_BASS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kp">true</span>
</code></pre></div>

<ul>
<li>
<p><strong>条件执行</strong>：</p>
<ul>
<li>在每个 <code>live_loop</code> 的 <code>do</code> 后面紧跟一行：<code>stop if MUTE_DRUMS</code>。</li>
<li>或者用 <code>if !MUTE_DRUMS ... end</code> 包裹发声代码。</li>
</ul>
</li>
<li>
<p><strong>尾音保护</strong>：</p>
<ul>
<li>不要依赖 <code>stop</code> 按钮来结束录音。</li>
<li>在代码末尾（如果是线性写作）或手动操作时，让乐器停止触发后，继续录制 4-8 秒的“空转”时间，捕捉 Reverb 的衰减。</li>
</ul>
</li>
</ul>
</details>
<hr />
<h2 id="184-gotchas">18.4 常见陷阱与错误 (Gotchas)</h2>
<p>在完成这些挑战时，你可能会遇到以下“直觉”的问题：</p>
<ol>
<li><strong>“为什么我的爆发（Drop）听起来没有力气？”</strong><ul>
<li><strong>原因</strong>：通常是因为你前面的 Build-up 太吵了。</li>
<li><strong>Rule of Thumb</strong>：<strong>对比产生力量</strong>。想要 Drop 听起来响，前面的过门必须切掉低频（High Pass Filter），并在最后留出静音。没人能听到 100 分贝后的 101 分贝，但所有人都能听到 0 分贝后的 80 分贝。</li>
</ul>
</li>
<li><strong>“古筝的轮指听起来像机关枪”</strong><ul>
<li><strong>原因</strong>：因为每次触发的音量（<code>amp</code>）都一样，且时间间隔过于精确。</li>
<li><strong>解法</strong>：必须通过 <code>rrand</code> 给 <code>amp</code> 和 <code>sleep</code> 加微小的随机量。没有人类能弹出绝对精确的 0.125 秒间隔。</li>
</ul>
</li>
<li><strong>“分轨导出后，DAW 里的速度对不上”</strong><ul>
<li><strong>原因</strong>：Sonic Pi 的启动可能有微小延迟，或者录音文件的开头包含了一段静音。</li>
<li><strong>解法</strong>：在导出音频的开头加一个短暂的“同步音”（如一个短促的 Click），在 DAW 里齐这个 Click，然后切掉它。</li>
</ul>
</li>
</ol>
<hr />
<h2 id="185">18.5 本章小结</h2>
<p>本章的练习没有标准答案。</p>
<ul>
<li>如果你的“久石让”听起来像“恐怖片”，检查你的和弦是否太低、混响是否太长。</li>
<li>如果你的“古风”听起来像“迪斯科”，检查你的节奏是否太满、缺乏呼吸。</li>
</ul>
<p>这些练习不仅是代码训练，更是<strong>耳力训练</strong>。当你能熟练地在脑海中调整参数并预知其听感结果时，你就真正掌握了 Sonic Pi 这个乐器。</p>
            </article>
            
            <nav class="page-nav"><a href="chapter17.html" class="nav-link prev">← 第 17 章：代码片段速查——可直接复制的“写作积木” (Cheat Sheet)</a><a href="chapter19.html" class="nav-link next">第 19 章：故障排除与性能优化——当声音不听话时 →</a></nav>
        </main>
    </div>
</body>
</html>